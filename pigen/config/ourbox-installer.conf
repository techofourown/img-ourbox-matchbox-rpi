# OurBox Matchbox installer image build config for pi-gen (OurBox repo mounted at /ourbox inside container)

OURBOX_PRODUCT="ourbox"
OURBOX_DEVICE="matchbox"
: "${OURBOX_TARGET:=rpi}"
OURBOX_TARGET="${OURBOX_TARGET}"
OURBOX_SKU_ID="${OURBOX_SKU_ID:-TOO-OBX-MBX-BASE-001}"
OURBOX_VARIANT="${OURBOX_VARIANT:-prod}"
OURBOX_VERSION="${OURBOX_VERSION:-dev}"

export OURBOX_PRODUCT OURBOX_DEVICE OURBOX_TARGET OURBOX_SKU_ID OURBOX_VARIANT OURBOX_VERSION

# Compatibility with other stages/tools
OURBOX_SKU="${OURBOX_SKU_ID}"
export OURBOX_SKU

IMG_NAME="installer-ourbox-matchbox-${OURBOX_TARGET,,}-${OURBOX_SKU_ID,,}-${OURBOX_VARIANT,,}-${OURBOX_VERSION,,}"

# Make output naming deterministic (avoid pi-gen's default YYYY-MM-DD prefix)
IMG_FILENAME="${IMG_NAME}"
ARCHIVE_FILENAME="${IMG_NAME}"
PI_GEN_RELEASE="OurBox Matchbox Installer (${OURBOX_VARIANT})"
RELEASE="trixie"
TARGET_HOSTNAME="ourbox-matchbox-installer"

IMG_SIZE=30000
ENABLE_SSH=0

DEPLOY_COMPRESSION="xz"
COMPRESSION_LEVEL="6"

STAGE_LIST="/pi-gen/stage0 /pi-gen/stage1 /pi-gen/stage2 /ourbox/pigen/stages/stage-ourbox-installer"
